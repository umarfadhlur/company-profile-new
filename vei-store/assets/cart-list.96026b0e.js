import{r,u as y,d as Q,aS as U,k as E,o as F,b as c,c as l,l as h,e as t,F as $,y as B,G as V,Y as A,aV as G,B as j,t as d,f as L,ac as O,aP as z,aQ as H,v as W}from"./index.c057e6d1.js";const u=r([]),b=async()=>{const o=await y().get("/api/cart");u.value=o.data.data},Y=async(o,n)=>{await y().put(`/api/cart/${o}`,{product_id:o,quantity:n}),await b()},J=async o=>{await y().del(`/api/cart/${o}`),await b()},v=o=>(z("data-v-bbb1a37c"),o=o(),H(),o),X={class:"p-6"},Z=v(()=>t("h2",{class:"text-2xl font-bold mb-4"},"Product",-1)),tt={key:0,class:"bg-white rounded-lg shadow p-3 mx-auto"},st={class:"table-auto w-full mb-4 mt-3"},et=v(()=>t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2 bg-white"}),t("th",{class:"px-4 py-2 bg-white"},"Product"),t("th",{class:"px-4 py-2 bg-white"},"Price"),t("th",{class:"px-4 py-2 bg-white"},"Quantity"),t("th",{class:"px-4 py-2 bg-white"},"Total"),t("th",{class:"px-4 py-2 bg-white"})])],-1)),at={class:"px-4 py-2 align-top"},ot=["value"],nt={class:"px-4 py-2 align-top"},ct={class:"flex gap-3 items-start"},lt=["src"],dt={class:"font-bold"},it={class:"text-xs text-gray-500"},rt={class:"font-semibold"},ut={class:"text-xs text-gray-500"},pt={class:"font-semibold"},_t={class:"text-xs text-green-700 mt-1"},ht={class:"px-4 py-2 align-top font-bold"},bt={class:"px-4 py-2 align-top"},yt={class:"flex items-center gap-2"},vt=["onClick","disabled"],gt={class:"font-bold"},mt=["onClick"],xt={class:"px-4 py-2 align-top font-bold"},ft={class:"px-4 py-2 align-top"},kt=["onClick"],wt=v(()=>t("i",{class:"fas fa-trash"},null,-1)),Ct=[wt],It={class:"flex flex-col md:flex-row justify-end items-center mt-8 gap-4"},Pt={class:"flex flex-col items-end gap-2"},St={class:"font-bold text-base mr-[185px]"},Mt={class:"flex gap-2 mt-2 mr-5"},qt=["disabled"],$t={key:1,class:"text-gray-500 text-center py-8"},Bt={key:2,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50"},Vt={class:"bg-white rounded-lg p-6 w-96"},jt=v(()=>t("h3",{class:"text-lg font-bold mb-4"},"Pilih Metode Pembayaran",-1)),Lt=["value"],Nt={class:"text-lg"},Rt=Q({__name:"cart-list",setup(o){const n=r([]),g=r(!1),i=r(null),N=r([{id:"cash",name:"Cash"},{id:"qris",name:"QRIS"}]);U();const R=()=>{g.value=!0},x=()=>{g.value=!1,i.value=null},m=e=>e?"Rp "+Number(e).toLocaleString("id-ID"):"-",f=async(e,a)=>{a<1||await Y(e.id,a)},T=async e=>{await J(e),n.value=n.value.filter(a=>a!==e)},D=E(()=>u.value.filter(e=>n.value.includes(e.id)).reduce((e,a)=>{var s;return e+(((s=a.product)==null?void 0:s.price)||0)*a.quantity},0)),K=async()=>{if(n.value.length===0||!i.value)return;const e=u.value.filter(s=>n.value.includes(s.id)).map(s=>({product_id:s.product.id,quantity:s.quantity,cart_id:s.id})),a=localStorage.getItem("mode")==="event"?"paid":"pending";try{await y().post("/api/transaction",{items:e,mode:localStorage.getItem("mode"),status:a,payment_method:i.value}),n.value=[],await b(),alert("Checkout berhasil!"),x()}catch(s){console.error("Checkout error:",s),alert("Checkout gagal, silakan coba lagi.")}};return F(()=>{b()}),(e,a)=>(c(),l("div",X,[Z,h(u).length?(c(),l("div",tt,[t("table",st,[et,t("tbody",null,[(c(!0),l($,null,B(h(u),s=>{var p,k,w,C,I,P,S,M,q;return c(),l("tr",{key:s.id},[t("td",at,[V(t("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=_=>n.value=_),value:s.id,class:"accent-yellow-500 w-5 h-5"},null,8,ot),[[A,n.value]])]),t("td",nt,[t("div",ct,[(p=s.product)!=null&&p.image_url?(c(),l("img",{key:0,src:`${s.product.image_url.startsWith("http")?"":h(G)+"/storage/"}${s.product.image_url}`,alt:"Gambar Produk",class:"w-16 h-16 object-cover rounded"},null,8,lt)):j("",!0),t("div",null,[t("div",dt,d((k=s.product)==null?void 0:k.name),1),t("div",it,[L("Color: "),t("span",rt,d(((C=(w=s.product)==null?void 0:w.category)==null?void 0:C.name)||"-"),1)]),t("div",ut,[L("Size: "),t("span",pt,d(((P=(I=s.product)==null?void 0:I.fandom)==null?void 0:P.name)||"-"),1)]),t("div",_t,"\u25CF In Stock ("+d((S=s.product)==null?void 0:S.stock)+" Pcs)",1)])])]),t("td",ht,d(m((M=s.product)==null?void 0:M.price)),1),t("td",bt,[t("div",yt,[t("button",{class:"btn btn-sm btn-secondary",onClick:_=>f(s,s.quantity-1),disabled:s.quantity<=1},"-",8,vt),t("span",gt,d(s.quantity),1),t("button",{class:"btn btn-sm btn-secondary",onClick:_=>f(s,s.quantity+1)},"+",8,mt)])]),t("td",xt,d(m(((q=s.product)==null?void 0:q.price)*s.quantity)),1),t("td",ft,[t("button",{class:"text-red-500",onClick:_=>T(s.id)},Ct,8,kt)])])}),128))])]),t("div",It,[t("div",Pt,[t("div",St,"Sub Total: "+d(m(h(D))),1),t("div",Mt,[t("button",{class:"btn btn-primary px-6 text-sm",onClick:R,disabled:n.value.length===0},"CHECKOUT",8,qt)])])])])):(c(),l("div",$t,"Keranjang kosong.")),g.value?(c(),l("div",Bt,[t("div",Vt,[jt,(c(!0),l($,null,B(N.value,s=>(c(),l("div",{key:s.id,class:"flex items-center mb-2 border p-2 rounded-lg hover:bg-gray-100 transition"},[V(t("input",{type:"radio",value:s.id,"onUpdate:modelValue":a[1]||(a[1]=p=>i.value=p),class:"mr-2"},null,8,Lt),[[O,i.value]]),t("label",Nt,d(s.name),1)]))),128)),t("div",{class:"flex justify-end mt-4"},[t("button",{class:"btn btn-secondary mr-2",onClick:x},"Batal"),t("button",{class:"btn btn-primary",onClick:K},"Konfirmasi")])])])):j("",!0)]))}});const Dt=W(Rt,[["__scopeId","data-v-bbb1a37c"]]);export{Dt as default};
