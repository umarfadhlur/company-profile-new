import{d as j,i as B,r as l,u as M,aS as E,j as D,a6 as N,aH as P,k as R,a1 as A,a as G,b as o,c as r,e,g,w,G as h,a4 as F,F as b,y as T,t as k,B as _,V as $,R as y,f as S,n as O,Z as n}from"./index.c057e6d1.js";import{_ as q,a as H,b as Y,c as Z,d as z}from"./polygon-object.23f49ea6.js";import{_ as J}from"./logo.9a721cd8.js";import{_ as K}from"./icon-mail.vue_vue_type_script_setup_true_lang.2e0a35e5.js";import{_ as Q}from"./icon-lock-dots.vue_vue_type_script_setup_true_lang.224add6d.js";const W="/assets/images/auth/login.svg",X=e("div",{class:"absolute inset-0"},[e("img",{src:q,alt:"image",class:"h-full w-full object-cover"})],-1),ee={class:"relative flex min-h-screen items-center justify-center bg-[url(/assets/images/auth/map.png)] bg-cover bg-center bg-no-repeat px-6 py-10 dark:bg-[#060818] sm:px-16"},te=e("img",{src:H,alt:"image",class:"absolute left-0 top-1/2 h-full max-h-[893px] -translate-y-1/2"},null,-1),ae=e("img",{src:Y,alt:"image",class:"absolute left-24 top-0 h-40 md:left-[30%]"},null,-1),se=e("img",{src:Z,alt:"image",class:"absolute right-0 top-0 h-[300px]"},null,-1),le=e("img",{src:z,alt:"image",class:"absolute bottom-0 end-[28%]"},null,-1),oe={class:"relative flex w-full max-w-[1502px] flex-col justify-between overflow-hidden rounded-md bg-white/60 backdrop-blur-lg dark:bg-black/50 lg:min-h-[758px] lg:flex-row lg:gap-10 xl:gap-0"},re=O('<div class="relative hidden w-full items-center justify-center bg-[linear-gradient(225deg,rgba(239,18,98,1)_0%,rgba(67,97,238,1)_100%)] p-5 lg:inline-flex lg:max-w-[835px] xl:-ms-28 ltr:xl:skew-x-[14deg] rtl:xl:skew-x-[-14deg]"><div class="absolute inset-y-0 w-8 from-primary/10 via-transparent to-transparent ltr:-right-10 ltr:bg-gradient-to-r rtl:-left-10 rtl:bg-gradient-to-l xl:w-16 ltr:xl:-right-20 rtl:xl:-left-20"></div><div class="ltr:xl:-skew-x-[14deg] rtl:xl:skew-x-[14deg]"><div class="mt-24 hidden w-full max-w-[430px] lg:block"><img src="'+W+'" alt="Cover Image" class="w-full"></div></div></div>',1),ie={class:"relative flex w-full flex-col items-center justify-center gap-6 px-4 pb-16 pt-6 sm:px-6 lg:max-w-[667px]"},ne={class:"flex w-full max-w-[440px] items-center gap-2 lg:absolute lg:end-6 lg:top-6 lg:max-w-full"},de=e("img",{src:J,alt:"Logo",class:"mx-auto w-10"},null,-1),ce={class:"w-full max-w-[440px] lg:mt-16"},ue=e("div",{class:"mb-10"},[e("h1",{class:"text-3xl font-extrabold uppercase !leading-snug text-primary md:text-4xl"},"Sign in "),e("p",{class:"text-base font-bold leading-normal text-white-dark"},"Enter your email and password to login")],-1),me={key:0,class:"mb-4"},pe=e("label",{for:"mode",class:"block mb-1 font-semibold"},"Mode",-1),ge=["value"],_e=["onSubmit"],he=e("label",{for:"username"},"Email",-1),xe={class:"relative text-white-dark"},fe={class:"absolute start-4 top-1/2 -translate-y-1/2"},ve=e("label",{for:"Password"},"Password",-1),we={class:"relative text-white-dark"},be={class:"absolute start-4 top-1/2 -translate-y-1/2"},ke={key:1,type:"submit",class:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]"},ye=e("div",{class:"relative my-7 text-center md:mb-9"},[e("span",{class:"absolute inset-x-0 top-1/2 h-px w-full -translate-y-1/2 bg-white-light dark:bg-white-dark"}),e("span",{class:"relative bg-white px-2 font-bold uppercase text-white-dark dark:bg-dark dark:text-white-light"},"or")],-1),Se={class:"text-center dark:text-white"},Le={class:"absolute bottom-6 w-full text-center dark:text-white"},Me=j({__name:"cover-login",setup(Ce){B({title:"Login Cover"});const s=l({email:"",password:""}),{login:L}=M(),x=E();D();const f=l(!1),d=l(!1),C=N(P());R(()=>`/assets/images/flags/${C.locale.toUpperCase()}.svg`);const c=l(null),u=l(localStorage.getItem("mode")||"event"),V=[{label:"Event",value:"event"},{label:"Online",value:"online"}],v=l(!1),m=l(!1);A(u,i=>{localStorage.setItem("mode",i)});const I=async()=>{var i;try{if(f.value=!0,s.value.email&&s.value.password){const t=await L("/api/authenticate",s.value);if(t&&t.data){const p=t.data.data;if(c.value=((i=p.user)==null?void 0:i.role)||null,localStorage.setItem("role",c.value||""),c.value==="admin"){v.value=!0,m.value=!0;return}d.value=!1,await n.fire({icon:"success",title:"Login Berhasil",text:"Selamat datang!",timer:1500,showConfirmButton:!1}),x.push("/homepage")}else d.value=!0,await n.fire({icon:"error",title:"Login Gagal",text:"Username atau password salah."})}else d.value=!0,await n.fire({icon:"error",title:"Login Gagal",text:"Username dan password harus diisi."})}catch(t){console.error("Login failed:",t),d.value=!0,await n.fire({icon:"error",title:"Login Gagal",text:"Terjadi kesalahan saat login."})}finally{f.value=!1}},U=async()=>{localStorage.setItem("mode",u.value),await n.fire({icon:"success",title:"Login Berhasil",text:"Selamat datang!",timer:1500,showConfirmButton:!1}),x.push("/homepage")};return localStorage.getItem("role")&&(c.value=localStorage.getItem("role")),(i,t)=>{const p=G("router-link");return o(),r("div",null,[X,e("div",ee,[te,ae,se,le,e("div",oe,[re,e("div",ie,[e("div",ne,[g(p,{to:"/",class:"w-8 block lg:hidden"},{default:w(()=>[de]),_:1})]),e("div",ce,[ue,v.value?(o(),r("div",me,[pe,h(e("select",{id:"mode","onUpdate:modelValue":t[0]||(t[0]=a=>u.value=a),class:"form-input w-full"},[(o(),r(b,null,T(V,a=>e("option",{key:a.value,value:a.value},k(a.label),9,ge)),64))],512),[[F,u.value]])])):_("",!0),e("form",{class:"space-y-5 dark:text-white",onSubmit:$(I,["prevent"])},[m.value?_("",!0):(o(),r(b,{key:0},[e("div",null,[he,e("div",xe,[h(e("input",{id:"Username",type:"text",placeholder:"Enter Username",class:"form-input ps-10 placeholder:text-white-dark","onUpdate:modelValue":t[1]||(t[1]=a=>s.value.email=a)},null,512),[[y,s.value.email]]),e("span",fe,[g(K,{fill:!0})])])]),e("div",null,[ve,e("div",we,[h(e("input",{id:"Password",type:"password",placeholder:"Enter Password",class:"form-input ps-10 placeholder:text-white-dark","onUpdate:modelValue":t[2]||(t[2]=a=>s.value.password=a)},null,512),[[y,s.value.password]]),e("span",be,[g(Q,{fill:!0})])])])],64)),m.value?_("",!0):(o(),r("button",ke," Sign in ")),m.value?(o(),r("button",{key:2,type:"button",onClick:U,class:"btn btn-gradient !mt-6 w-full border-0 uppercase shadow-[0_10px_20px_-10px_rgba(67,97,238,0.44)]"}," Lanjutkan ")):_("",!0)],40,_e),ye,e("div",Se,[S(" Don't have an account ? "),g(p,{to:"/auth/cover-register",class:"uppercase text-primary underline transition hover:text-black dark:hover:text-white"},{default:w(()=>[S(" SIGN UP ")]),_:1})])]),e("p",Le,"\xA9 "+k(new Date().getFullYear())+".Veitru All Rights Reserved.",1)])])])])}}});export{Me as default};
