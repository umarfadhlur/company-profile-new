import{d as R,u as V,aS as j,r as m,o as z,k as b,b as i,c as r,e as t,g as E,F as D,y as P,t as a,l as g,x as H,aP as G,aQ as J,v as K}from"./index.24daf0ec.js";import{I as O}from"./icon-loader.4e73d94c.js";const M=y=>(G("data-v-c6d5299f"),y=y(),J(),y),U={class:"p-6"},W=M(()=>t("h2",{class:"text-2xl font-bold mb-4"},"Transaksi",-1)),X={class:"bg-white rounded-lg shadow p-3 mx-auto max-w-4xl"},Y={key:0,class:"text-center py-8"},Z={key:1},tt={class:"table-auto w-full mb-4 mt-3"},et=M(()=>t("thead",{class:"bg-gray-100"},[t("tr",null,[t("th",{class:"px-4 py-2"},"#"),t("th",{class:"px-4 py-2"},"Code / Date"),t("th",{class:"px-4 py-2"},"Items"),t("th",{class:"px-4 py-2"},"Total"),t("th",{class:"px-4 py-2"},"Status"),t("th",{class:"px-4 py-2"},"Action")])],-1)),st={class:"px-4 py-3"},at={class:"px-4 py-3"},nt={class:"font-semibold"},ot={class:"text-xs text-gray-500"},ct={class:"px-4 py-3"},lt={class:"flex flex-col gap-2"},dt={class:"text-sm"},it={class:"font-medium"},rt={class:"text-xs text-gray-500"},ut={class:"px-4 py-3 font-bold"},pt={class:"px-4 py-3"},_t={class:"px-4 py-3"},vt=["onClick"],ht={class:"flex justify-between items-center"},mt={class:"text-sm text-gray-600"},gt={class:"flex items-center gap-2"},yt=["disabled"],xt={class:"px-2"},ft=["disabled"],bt={key:2,class:"text-gray-500 text-center py-8"},kt=R({__name:"transaction-list",setup(y){const T=V(),B=j(),u=m([]),c=m(1),_=m(5),v=m(0),x=m(!1),k=async(e=1)=>{var l,s,p,d,n,h,S,I,L;try{x.value=!0;const o=await T.get("/api/transaction",{params:{page:e,per_page:_.value}});(l=o.data)!=null&&l.data?(u.value=o.data.data,v.value=(d=(p=(s=o.data.meta)==null?void 0:s.total)!=null?p:o.data.total)!=null?d:u.value.length,c.value=(S=(h=(n=o.data.meta)==null?void 0:n.current_page)!=null?h:o.data.current_page)!=null?S:e,_.value=(L=(I=o.data.meta)==null?void 0:I.per_page)!=null?L:_.value):(u.value=o.data,v.value=u.value.length)}catch(o){console.error("fetch transactions error",o)}finally{x.value=!1}},w=e=>{e<1||(c.value=e,k(e))};z(()=>k(c.value));const C=b(()=>Math.max(1,Math.ceil((v.value||0)/_.value))),f=b(()=>(c.value-1)*_.value),N=b(()=>f.value+u.value.length),$=e=>e==null?"-":"Rp "+Number(e).toLocaleString("id-ID"),q=e=>e?new Date(e).toLocaleString():"-",A=(e=[])=>(e||[]).reduce((l,s)=>{var p,d,n,h;return l+((n=(d=(p=s.product)==null?void 0:p.price)!=null?d:s.price)!=null?n:0)*((h=s.quantity)!=null?h:0)},0),F=e=>e?["paid","completed","success"].includes(String(e).toLowerCase())?"text-green-600":["pending","processing"].includes(String(e).toLowerCase())?"text-yellow-600":["canceled","failed"].includes(String(e).toLowerCase())?"text-red-600":"text-gray-600":"text-gray-600",Q=e=>{B.push(`/apps/transaction/detail/${e}`)};return(e,l)=>(i(),r("div",U,[W,t("div",X,[x.value?(i(),r("div",Y,[E(O,{class:"w-8 h-8 text-gray-500 m-auto"})])):u.value.length?(i(),r("div",Z,[t("table",tt,[et,t("tbody",null,[(i(!0),r(D,null,P(u.value,(s,p)=>{var d;return i(),r("tr",{key:s.id,class:"align-top"},[t("td",st,a(g(f)+p+1),1),t("td",at,[t("div",nt,a(s.code||"#"+s.id),1),t("div",ot,a(q(s.created_at)),1)]),t("td",ct,[t("div",lt,[(i(!0),r(D,null,P(s.details||[],n=>(i(),r("div",{key:n.product_id,class:"flex items-center gap-3"},[t("div",dt,[t("div",it,a(n.product_name||n.product_name||"-"),1),t("div",rt,"Qty: "+a(n.quantity),1)])]))),128))])]),t("td",ut,a($((d=s.total)!=null?d:A(s.items))),1),t("td",pt,[t("span",{class:H(F(s.status))},a(s.status||"-"),3)]),t("td",_t,[t("button",{class:"btn btn-sm btn-secondary",onClick:n=>Q(s.id)},"Detail",8,vt)])])}),128))])]),t("div",ht,[t("div",mt,"Menampilkan "+a(g(f)+1)+" - "+a(Math.min(g(N),v.value))+" dari "+a(v.value),1),t("div",gt,[t("button",{class:"btn btn-secondary btn-sm",disabled:c.value===1,onClick:l[0]||(l[0]=s=>w(c.value-1))},"Prev",8,yt),t("span",xt,"Halaman "+a(c.value)+" / "+a(g(C)),1),t("button",{class:"btn btn-secondary btn-sm",disabled:c.value===g(C),onClick:l[1]||(l[1]=s=>w(c.value+1))},"Next",8,ft)])])])):(i(),r("div",bt,"Belum ada transaksi."))])]))}});const St=K(kt,[["__scopeId","data-v-c6d5299f"]]);export{St as default};
