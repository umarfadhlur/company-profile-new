import{d as k,r as m,k as b,o as w,a as C,b as o,c as n,e,g as y,w as h,l as c,F as B,y as $,aV as j,t as u,u as f,Z as g,f as x}from"./index.c057e6d1.js";const K={class:"p-6 space-y-6"},N={class:"bg-white rounded-lg shadow p-6 mx-auto"},T={class:"flex justify-between items-center mb-4"},D=e("h2",{class:"text-xl font-bold text-primary"},"Daftar Kategori",-1),H={key:0,class:"overflow-x-auto table-responsive"},V={class:"table-auto w-full border"},A=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{class:"px-4 py-2"},"Gambar"),e("th",{class:"px-4 py-2"},"Nama"),e("th",{class:"px-4 py-2"},"Deskripsi"),e("th",{class:"px-4 py-2"},"Aksi")])],-1),E={class:"px-4 py-2"},F=["src"],G={key:1,class:"text-gray-400"},L={class:"px-4 py-2"},M={class:"px-4 py-2"},P={class:"px-4 py-2 flex gap-2"},S=["onClick"],R={class:"flex justify-end items-center mt-4 gap-2"},U=["disabled"],Z={class:"px-2"},q=["disabled"],z={key:1,class:"text-gray-500 text-center py-8"},W=k({__name:"category-list",setup(I){const i=m([]),t=m(1),p=10,_=b(()=>{const a=(t.value-1)*p;return i.value.slice(a,a+p)}),d=b(()=>Math.ceil(i.value.length/p));w(async()=>{const a=await f().get("/api/category");i.value=a.data.data,t.value=1});const v=async a=>{if(!!(await g.fire({title:"Hapus kategori?",text:"Kategori akan dihapus secara permanen. Lanjutkan?",icon:"warning",showCancelButton:!0,confirmButtonText:"Hapus",cancelButtonText:"Batal",reverseButtons:!0})).isConfirmed)try{await f().del(`/api/category/${a}`),i.value=i.value.filter(r=>r.id!==a),t.value>d.value&&(t.value=Math.max(1,d.value)),await g.fire("Terhapus","Kategori berhasil dihapus.","success")}catch(r){console.error("Failed to delete category",r),await g.fire("Gagal","Gagal menghapus kategori.","error")}};return(a,l)=>{const r=C("router-link");return o(),n("div",K,[e("div",N,[e("div",T,[D,y(r,{to:"/apps/category/add",class:"btn btn-primary"},{default:h(()=>[x("Tambah Kategori")]),_:1})]),c(_).length?(o(),n("div",H,[e("table",V,[A,e("tbody",null,[(o(!0),n(B,null,$(c(_),s=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",E,[s.image_url?(o(),n("img",{key:0,src:`${c(j)}/public/storage/${s.image_url}`,alt:"Kategori",class:"w-12 h-12 object-cover rounded"},null,8,F)):(o(),n("span",G,"-"))]),e("td",L,u(s.name),1),e("td",M,u(s.description),1),e("td",P,[y(r,{to:`/apps/category/edit/${s.id}`,class:"btn btn-warning btn-sm flex items-center justify-center rounded font-semibold min-w-[70px]"},{default:h(()=>[x("Edit")]),_:2},1032,["to"]),e("button",{class:"btn btn-danger btn-sm flex items-center justify-center rounded font-semibold min-w-[70px]",onClick:O=>v(s.id)},"Hapus",8,S)])]))),128))])]),e("div",R,[e("button",{class:"btn btn-secondary btn-sm",disabled:t.value===1,onClick:l[0]||(l[0]=s=>t.value--)},"Prev",8,U),e("span",Z,"Halaman "+u(t.value)+" / "+u(c(d)),1),e("button",{class:"btn btn-secondary btn-sm",disabled:t.value===c(d),onClick:l[1]||(l[1]=s=>t.value++)},"Next",8,q)])])):(o(),n("div",z,"Belum ada kategori."))])])}}});export{W as default};
