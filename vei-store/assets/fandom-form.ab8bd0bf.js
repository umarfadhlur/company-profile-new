import{d as k,aU as x,aS as F,r as i,o as C,a as D,b as m,c as r,e,t as p,V as N,G as f,R as v,B as U,g as V,w as B,u as c,aV as T,f as R}from"./index.24daf0ec.js";const j={class:"p-6 flex justify-center"},E={class:"bg-white rounded-lg shadow p-6 w-full max-w-xl"},L={class:"text-xl font-bold mb-4 text-primary"},S=["onSubmit"],$=e("label",{class:"block font-semibold mb-1"},"Nama",-1),M=e("label",{class:"block font-semibold mb-1"},"Deskripsi",-1),P=e("label",{class:"block font-semibold mb-1"},"Gambar",-1),A={class:"flex items-center gap-4"},G=["src"],K={key:1,class:"text-gray-400"},H={type:"submit",class:"btn btn-primary w-full mt-2"},q=k({__name:"fandom-form",setup(I){const d=x(),_=F(),n=i(!!d.params.id),t=i({name:"",description:"",image_url:""}),l=i(null),o=i(void 0),b=async()=>{if(n.value){const a=await c().get(`/api/fandom/${d.params.id}`);t.value={name:a.data.data.name,description:a.data.data.description,image_url:a.data.data.image_url||""},t.value.image_url&&(o.value=`${T}/public/storage/${t.value.image_url}`)}},g=a=>{const s=a.target.files;s&&s[0]&&(l.value=s[0],o.value=URL.createObjectURL(s[0]))},h=()=>{l.value=null,o.value=void 0,t.value.image_url=""},w=async()=>{const a=new FormData;if(a.append("name",t.value.name||""),a.append("description",t.value.description||""),l.value?a.append("image_url",l.value):t.value.image_url===""&&n.value&&a.append("remove_image","1"),!t.value.name){alert("Nama fandom wajib diisi!");return}n.value?await c().post(`/api/fandom/${d.params.id}?_method=PUT`,a,{headers:{"Content-Type":"multipart/form-data"}}):await c().post("/api/fandom",a,{headers:{"Content-Type":"multipart/form-data"}}),_.push("/apps/fandom")};return C(b),(a,s)=>{const y=D("router-link");return m(),r("div",j,[e("div",E,[e("h2",L,p(n.value?"Edit Fandom":"Tambah Fandom Baru"),1),e("form",{onSubmit:N(w,["prevent"]),class:"space-y-4"},[e("div",null,[$,f(e("input",{"onUpdate:modelValue":s[0]||(s[0]=u=>t.value.name=u),placeholder:"Nama Fandom",class:"form-input w-full"},null,512),[[v,t.value.name]])]),e("div",null,[M,f(e("input",{"onUpdate:modelValue":s[1]||(s[1]=u=>t.value.description=u),placeholder:"Deskripsi Fandom",class:"form-input w-full"},null,512),[[v,t.value.description]])]),e("div",null,[P,e("div",A,[o.value?(m(),r("img",{key:0,src:o.value,alt:"Preview",class:"w-16 h-16 object-cover rounded border"},null,8,G)):(m(),r("span",K,"Belum ada gambar")),o.value?(m(),r("button",{key:2,type:"button",class:"btn btn-danger btn-sm",onClick:h},"Hapus")):U("",!0)]),e("input",{type:"file",accept:"image/*",onChange:g,class:"mt-2"},null,32)]),e("button",H,p(n.value?"Update Fandom":"Tambah Fandom"),1),V(y,{to:"/apps/fandom",class:"btn btn-secondary w-full mt-2"},{default:B(()=>[R("Kembali ke List")]),_:1})],40,S)])])}}});export{q as default};
