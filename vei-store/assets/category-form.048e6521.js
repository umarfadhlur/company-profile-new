import{d as k,aU as x,aS as C,r as n,o as N,a as K,b as r,c as u,e,t as p,V as U,G as v,R as g,B as V,g as B,w as D,u as d,aV as T,f as R}from"./index.24daf0ec.js";const j={class:"p-6 flex justify-center"},E={class:"bg-white rounded-lg shadow p-6 w-full max-w-xl"},L={class:"text-xl font-bold mb-4 text-primary"},S=["onSubmit"],$=e("label",{class:"block font-semibold mb-1"},"Nama",-1),F=e("label",{class:"block font-semibold mb-1"},"Deskripsi",-1),M=e("label",{class:"block font-semibold mb-1"},"Gambar",-1),P={class:"flex items-center gap-4"},A=["src"],G={key:1,class:"text-gray-400"},H={type:"submit",class:"btn btn-primary w-full mt-2"},q=k({__name:"category-form",setup(I){const c=x(),_=C(),l=n(!!c.params.id),t=n({name:"",image_url:"",description:""}),i=n(null),o=n(void 0),b=async()=>{if(l.value){const a=await d().get(`/api/category/${c.params.id}`);t.value={name:a.data.data.name,description:a.data.data.description,image_url:a.data.data.image_url||""},t.value.image_url&&(o.value=`${T}/public/storage/${t.value.image_url}`)}},f=a=>{const s=a.target.files;s&&s[0]&&(i.value=s[0],o.value=URL.createObjectURL(s[0]))},h=()=>{i.value=null,o.value=void 0,t.value.image_url=""},y=async()=>{const a=new FormData;if(a.append("name",t.value.name||""),a.append("description",t.value.description||""),i.value?a.append("image_url",i.value):t.value.image_url===""&&l.value&&a.append("remove_image","1"),!t.value.name){alert("Nama kategori wajib diisi!");return}l.value?await d().post(`/api/category/${c.params.id}?_method=PUT`,a,{headers:{"Content-Type":"multipart/form-data"}}):await d().post("/api/category",a,{headers:{"Content-Type":"multipart/form-data"}}),_.push("/apps/category")};return N(b),(a,s)=>{const w=K("router-link");return r(),u("div",j,[e("div",E,[e("h2",L,p(l.value?"Edit Kategori":"Tambah Kategori Baru"),1),e("form",{onSubmit:U(y,["prevent"]),class:"space-y-4"},[e("div",null,[$,v(e("input",{"onUpdate:modelValue":s[0]||(s[0]=m=>t.value.name=m),placeholder:"Nama Kategori",class:"form-input w-full"},null,512),[[g,t.value.name]])]),e("div",null,[F,v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=m=>t.value.description=m),placeholder:"Nama Kategori",class:"form-input w-full"},null,512),[[g,t.value.description]])]),e("div",null,[M,e("div",P,[o.value?(r(),u("img",{key:0,src:o.value,alt:"Preview",class:"w-16 h-16 object-cover rounded border"},null,8,A)):(r(),u("span",G,"Belum ada gambar")),o.value?(r(),u("button",{key:2,type:"button",class:"btn btn-danger btn-sm",onClick:h},"Hapus")):V("",!0)]),e("input",{type:"file",accept:"image/*",onChange:f,class:"mt-2"},null,32)]),e("button",H,p(l.value?"Update Kategori":"Tambah Kategori"),1),B(w,{to:"/apps/category",class:"btn btn-secondary w-full mt-2"},{default:D(()=>[R("Kembali ke List")]),_:1})],40,S)])])}}});export{q as default};
